<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>大阪跨年</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'muji-beige': '#F5F5F0',
                        'muji-sand': '#E8E4D9',
                        'muji-brown': '#8C7E6D',
                        'muji-dark': '#4A4A4A',
                        'muji-accent': '#A68B6A'
                    }
                }
            }
        }
    </script>

    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #F5F5F0;
            color: #4A4A4A;
            -webkit-tap-highlight-color: transparent;
        }
        .tab-content { display: none; }
        .active-tab { display: block; }
        .muji-card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        .nav-active { color: #8C7E6D; font-weight: 700; }
        details > summary { list-style: none; }
        details > summary::-webkit-details-marker { display: none; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .checkbox-muji { accent-color: #8C7E6D; }
    </style>
</head>
<body class="pb-24">

    <header class="bg-white border-b border-muji-sand p-6 sticky top-0 z-50 shadow-sm">
        <div class="max-w-md mx-auto">
            <h1 class="text-xl font-bold tracking-tight text-muji-brown mb-1">OSAKA WINTER 2025</h1>
            <div class="flex items-center text-[10px] text-gray-500 gap-4">
                <span><i class="fa-solid fa-plane mr-1"></i> 12/28 - 01/01</span>
                <span><i class="fa-solid fa-hotel mr-1"></i> 谷町君 HOTEL 恵美須町72</span>
            </div>
        </div>
    </header>

    <main class="max-w-md mx-auto px-4 mt-6">
        
        <section id="plan" class="tab-content active-tab">
            <div class="muji-card p-4 mb-6 border-l-4 border-muji-brown">
                <h3 class="text-xs font-bold text-muji-brown mb-3 uppercase tracking-wider">Flight Info</h3>
                <div class="space-y-2 text-xs">
                    <div class="flex justify-between items-center bg-muji-beige p-2 rounded">
                        <span class="font-medium">去程 12/28</span>
                        <span class="font-bold">IT210 07:00-10:25 (T1)</span>
                    </div>
                    <div class="flex justify-between items-center bg-muji-beige p-2 rounded">
                        <span class="font-medium">回程 01/01</span>
                        <span class="font-bold">IT211 11:30-13:50 (T1)</span>
                    </div>
                </div>
            </div>

            <div class="flex overflow-x-auto pb-4 gap-2 no-scrollbar mb-4">
                <button onclick="showDay(1)" class="day-btn flex-shrink-0 px-4 py-2 muji-card text-xs font-bold bg-white" id="btn-d1">12/28</button>
                <button onclick="showDay(2)" class="day-btn flex-shrink-0 px-4 py-2 muji-card text-xs font-bold" id="btn-d2">12/29</button>
                <button onclick="showDay(3)" class="day-btn flex-shrink-0 px-4 py-2 muji-card text-xs font-bold" id="btn-d3">12/30</button>
                <button onclick="showDay(4)" class="day-btn flex-shrink-0 px-4 py-2 muji-card text-xs font-bold" id="btn-d4">12/31</button>
                <button onclick="showDay(5)" class="day-btn flex-shrink-0 px-4 py-2 muji-card text-xs font-bold" id="btn-d5">01/01</button>
            </div>

            <div id="itinerary-content" class="space-y-4">
                </div>
        </section>

        <section id="guide" class="tab-content">
            <h2 class="text-lg font-bold mb-4 italic text-muji-brown"><i class="fa-solid fa-scroll mr-2"></i>深度參拜指南</h2>
            <div class="space-y-6">
                <div class="muji-card p-5">
                    <h3 class="font-bold text-muji-accent border-b border-muji-sand pb-2 mb-3">住吉大社：最強許願法</h3>
                    <div class="text-xs leading-relaxed space-y-4">
                        <div class="bg-muji-beige p-3 rounded-lg">
                            <p class="font-bold mb-1">🏆 【五大力】尋石求財</p>
                            <p>在滿地的碎石子中，找出分別寫有「五」、「大」、「力」的三顆小石頭，買專屬守袋裝入。</p>
                        </div>
                        <div class="bg-muji-beige p-3 rounded-lg">
                            <p class="font-bold mb-1">🔮 【重輕石】占卜願望</p>
                            <p>舉起石頭許願後再次舉起，若變輕代表願望易實現。</p>
                        </div>
                    </div>
                </div>
                </div>
        </section>

        <section id="lists" class="tab-content">
            <h2 class="text-lg font-bold mb-4 italic text-muji-brown"><i class="fa-solid fa-clipboard-check mr-2"></i>行前準備 CheckList</h2>
            <div id="checklist" class="muji-card p-6 space-y-3 mb-8"></div>
            <h2 class="text-lg font-bold mb-4 italic text-muji-brown"><i class="fa-solid fa-pen-to-square mr-2"></i>個人備忘錄</h2>
            <div class="muji-card p-4">
                <textarea id="note-input" rows="6" class="w-full text-sm bg-transparent outline-none border-none resize-none" placeholder="在此輸入筆記..."></textarea>
                <div id="note-links" class="mt-3 flex flex-wrap gap-2"></div>
            </div>
        </section>

        <section id="info" class="tab-content">
            <h2 class="text-lg font-bold mb-4 italic text-muji-brown"><i class="fa-solid fa-circle-info mr-2"></i>實用旅行資訊</h2>
            <div class="space-y-4">
                <div class="muji-card p-5 space-y-4 text-xs">
                    <p class="text-gray-500">建議使用 ICOCA 或 Apple Pay 綁定 Suica。12/31 跨年電車延長營運。</p>
                </div>
            </div>
        </section>

    </main>

    <nav class="fixed bottom-0 left-0 right-0 bg-white/90 backdrop-blur-md border-t border-muji-sand px-6 py-3 flex justify-between items-center z-50">
        <button onclick="switchTab('plan', this)" class="nav-item flex flex-col items-center gap-1 nav-active transition-all">
            <i class="fa-solid fa-calendar-day text-lg"></i>
            <span class="text-[10px]">行程表</span>
        </button>
        <button onclick="switchTab('guide', this)" class="nav-item flex flex-col items-center gap-1 text-gray-400 transition-all">
            <i class="fa-solid fa-map-location-dot text-lg"></i>
            <span class="text-[10px]">參拜導覽</span>
        </button>
        <button onclick="switchTab('lists', this)" class="nav-item flex flex-col items-center gap-1 text-gray-400 transition-all">
            <i class="fa-solid fa-list-check text-lg"></i>
            <span class="text-[10px]">清單筆記</span>
        </button>
        <button onclick="switchTab('info', this)" class="nav-item flex flex-col items-center gap-1 text-gray-400 transition-all">
            <i class="fa-solid fa-info-circle text-lg"></i>
            <span class="text-[10px]">實用資訊</span>
        </button>
    </nav>

    <script>
        const travelData = {
            1: {
                title: "12/28 (六) | 抵達大阪",
                items: [
                    { time: "10:25", event: "抵達關西機場", detail: "預估 11:30 出關。" },
                    { 
                        time: "12:30", 
                        event: "南海電鐵 ➔ 飯店寄物", 
                        route: "1. 從關西機場出發：搭乘南海電鐵「空港急行」或「特急 Rapi:t」往「難波」方向 (40-50分)。<br>2. 在「天下茶屋」下車：下車後請出站。<br>3. 轉乘大阪 Metro：搭乘堺筋線 (往北千里/高槻市方向)。路線：天下茶屋 → 動物園前 → 惠美須町。<br>4. 到達「惠美須町」：車程約 2-3 分鐘。從 1-B 出口 (或 1-A、2 號出口) 步行約 2-4 分鐘抵達。",
                        note: "飯店：谷町君･ﾎﾃﾙ･恵美須72<br>地址：大阪府大阪市浪速区日本橋東３丁目８−5",
                        map: "谷町君 HOTEL 恵美須町72"
                    },
                    { 
                        time: "13:30", 
                        event: "午餐：新世界 串炸 / 章魚燒", 
                        route: "住宿走路5-10分鐘", 
                        note: "• 串炸 八重勝 (在地首選) 或 元祖串炸達摩<br>• 章魚燒: 新世界 かんかん (在八重勝旁邊，8顆500日圓超平價)<br>八重勝必點: 炸蝦、燒牛筋 (どて焼き)<br>達摩必點: 元祖牛肉串、靈魂沾醬",
                        map: "串かつ 八重勝"
                    },
                    { 
                        time: "15:00", 
                        event: "通天閣", 
                        route: "住宿走路5-10分鐘", 
                        note: "通天閣B1 地下街:<br>• 吉依卡哇紀念幣:一枚通常為 600 日圓 (旁邊刻印機約 30-50 日圓可刻英文名)。<br>• 江崎格力高 (Glico)：限定口味 Pocky。<br>• 登塔 (4、5樓)：1,000 日圓 (溜滑梯、摸比利肯腳底)。<br>• 鏘鏘小巷: 八重勝所在的熱鬧巷子。",
                        map: "通天閣"
                    },
                    { 
                        time: "17:00", 
                        event: "阿倍野 HARUKAS 300", 
                        route: "<b>【走路方案 (推薦拍照)】</b><br>從新世界通天閣出發，穿過「天王寺公園 (てんしば)」，走出公園後經天橋或地下道即可抵達。目標是前方那棟明顯的藍色玻璃大樓。邊走邊拍約 20 分鐘。<br><br><b>【搭車方案】</b><br>1. 乘車處：走路5-8分鐘到地鐵 「動物園前站」 (M22)。<br>2. 路線：搭乘 御堂筋線（紅色）往「天王寺/中百舌鳥」方向。<br>3. 下車處：在「天王寺站」 (M23) 下車，1 站即達。<br>4. 步行：出站後跟著「あべのハルカス (Abeno Harukas)」的指標走。",
                        map: "阿倍野 HARUKAS 300"
                    },
                    { 
                        time: "19:30", 
                        event: "晚餐：天王寺周邊燒肉", 
                        map: "燒肉萬野 天王寺"
                    }
                ]
            },
            2: {
                title: "12/29 (日) | 京都",
                items: [
                    { time: "08:00", event: "出發京都", route: "JR新快速前往京都 (約30分)。" },
                    { time: "09:30", event: "清水寺、二三坂", map: "清水寺" },
                    { time: "13:00", event: "回到梅田", route: "阪急電鐵從「京都河原町」直達「大阪梅田」。" },
                    { time: "16:00", event: "心齋橋 / 道頓堀", map: "道頓堀" },
                    { time: "21:00", event: "回飯店" }
                ]
            },
            3: {
                title: "12/30 (一) | 環球影城",
                items: [
                    { time: "07:30", event: "抵達 USJ 排隊", map: "日本環球影城" },
                    { time: "20:00", event: "離開園區" },
                    { time: "21:30", event: "回飯店宵夜" }
                ]
            },
            4: {
                title: "12/31 (二) | 神社跨年",
                items: [
                    { time: "10:00", event: "大阪城公園", map: "大阪城天守閣" },
                    { time: "15:00", event: "大國主神社", note: "務必買到「種錢」。", map: "大國主神社 大阪" },
                    { time: "16:30", event: "今宮戎神社", map: "今宮戎神社" },
                    { time: "18:00", event: "回飯店補眠/蕎麥麵", map: "總本家 更科" },
                    { time: "21:00", event: "出發往住吉大社", map: "住吉大社" }
                ]
            },
            5: {
                title: "01/01 (三) | 返程",
                items: [
                    { time: "08:00", event: "退房" },
                    { time: "08:30", event: "前往機場", map: "關西國際機場" },
                    { time: "11:30", event: "班機起飛" }
                ]
            }
        };

        const defaultChecklist = [
            "護照", "Esim / 網卡", "行動電源", "暖暖包", "日幣現金", "Visit Japan Web QR", "5日圓硬幣",
            "Suica/ICOCA", "真空壓縮袋", "盥洗用品", "藥品", "門票預訂"
        ];

        function switchTab(tabId, el) {
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active-tab'));
            document.getElementById(tabId).classList.add('active-tab');
            document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('nav-active'));
            el.classList.add('nav-active');
            window.scrollTo(0,0);
        }

        function showDay(day) {
            const container = document.getElementById('itinerary-content');
            const data = travelData[day];
            document.querySelectorAll('.day-btn').forEach(b => b.classList.remove('bg-muji-brown', 'text-white'));
            document.getElementById(`btn-d${day}`).classList.add('bg-muji-brown', 'text-white');

            let html = `<h2 class="text-sm font-bold text-muji-brown mb-2 pl-1">${data.title}</h2>`;
            data.items.forEach(item => {
                html += `
                <div class="muji-card overflow-hidden">
                    <div class="p-4">
                        <div class="flex items-start gap-3">
                            <span class="text-[11px] font-bold text-muji-accent bg-muji-beige px-2 py-0.5 rounded mt-0.5">${item.time}</span>
                            <div class="flex-1">
                                <h4 class="text-sm font-bold">${item.event}</h4>
                                ${item.detail ? `<p class="text-xs text-gray-500 mt-1">${item.detail}</p>` : ''}
                                ${item.note ? `<p class="text-[11px] text-muji-brown mt-1 font-medium"><i class="fa-solid fa-star-of-life scale-75 mr-1"></i>${item.note}</p>` : ''}
                            </div>
                            ${item.map ? `
                                <a href="https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(item.map)}" target="_blank" class="text-muji-brown">
                                    <i class="fa-solid fa-map-location-dot text-lg"></i>
                                </a>` : ''}
                        </div>
                        ${item.route ? `
                        <details class="mt-3 border-t border-dotted border-muji-sand pt-2">
                            <summary class="text-[10px] text-gray-400 font-bold flex items-center justify-between cursor-pointer">路線詳情 <i class="fa-solid fa-chevron-down text-[8px]"></i></summary>
                            <p class="text-[11px] text-gray-600 mt-2 leading-relaxed bg-muji-beige/50 p-2 rounded">${item.route}</p>
                        </details>` : ''}
                    </div>
                </div>`;
            });
            container.innerHTML = html;
        }

        function initChecklist() {
            const saved = JSON.parse(localStorage.getItem('travel_checklist'));
            const finalData = saved || defaultChecklist.map(t => ({text: t, done: false}));
            const container = document.getElementById('checklist');
            container.innerHTML = finalData.map((item, i) => `
                <div class="flex items-center gap-3">
                    <input type="checkbox" class="checkbox-muji h-4 w-4 rounded" ${item.done ? 'checked' : ''} onchange="toggleCheck(${i})">
                    <span class="text-sm ${item.done ? 'line-through text-gray-300' : ''}">${item.text}</span>
                </div>`).join('');
            if(!saved) localStorage.setItem('travel_checklist', JSON.stringify(finalData));
        }

        window.toggleCheck = (i) => {
            const saved = JSON.parse(localStorage.getItem('travel_checklist'));
            saved[i].done = !saved[i].done;
            localStorage.setItem('travel_checklist', JSON.stringify(saved));
            initChecklist();
        }

        function initNotes() {
            const noteInput = document.getElementById('note-input');
            noteInput.value = localStorage.getItem('travel_notes') || '';
            noteInput.addEventListener('input', (e) => localStorage.setItem('travel_notes', e.target.value));
        }

        window.onload = () => { showDay(1); initChecklist(); initNotes(); };
    </script>
</body>
</html>
